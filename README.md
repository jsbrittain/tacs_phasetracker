# TACS Phase-tracker

Frequency and phase tracker developed for use with Transcranial Alternating Current Stimulation primarily to phase-cancel Parkinsonian tremor.

This program was developed using the (PCMCIA) NI-DAQCard 1200, which offers fast single channel read/write capabilities. A waveform is sampled and placed into a circular buffer. The most recent part of the circular buffer is then unwrapeed into a short "data" buffer and multipled by a sine and cosine function corresponding to the current tracking frequency. Magnitude and phase are then extracted and a phase-locked (and offset) sinusoid output. The frequency with the highest magnitude response takes over as tracking frequency. To avoid congesting the processor, buffering and subsequent testing for this is performed over sequential sampling iterations. For instance, with a minimum frequency (fmin) of 4 Hz, a maximum (fmax) of 6 Hz, and a testing resolution (fres) of 0.1 Hz, there are 21 pre-computed sine and cosine waves. On the first iteration the frequency tracking buffer is unwrapped from the circular buffer, each of the 21 frequencies are then tested over the following 21 sampling loops. On the next sample, the largest magnitude is assessed and selected as tracking frequency. Frequency tracking can be delayed by specifying the trecentre parameter, which corresponds to the number of dead iterations before refilling the tracking buffer.
